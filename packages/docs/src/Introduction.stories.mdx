import { Meta, Canvas } from '@storybook/addon-docs';
import { JsonForm } from '@sagold/react-json-editor';
import { widgets } from '@sagold/rje-widgets';
import { schema } from './examples/data/featureToggleForm';
import logo from '../../../images/he-full-trans-2000x564.png';

<Meta title="Introduction" />

<a href="https://GitHub.com/sagold/json-editor/">
  <img src="https://badgen.net/badge/icon/github?icon=github&label" />
</a>

<img src={logo} />

<h1 style={{ textAlign: 'center' }}>json-editor documentation</h1>

> Documentation around [@sagold/react-json-editor](https://github.com/sagold/json-editor/tree/main/packages/react-json-editor), an implementation of [headless-json-editor](https://github.com/sagold/json-editor/tree/main/packages/headless-json-editor)`. This project is currently in an early state, but the package is published, used in production and being tested regularly.

installation

`yarn add @sagold/react-json-editor`

## Current features in development

fixing array oneOf support

<Canvas>
  <JsonForm
    widgets={widgets}
    addOptionalProps={false}
    data={[{ type: 'header' }]}
    schema={{
      title: 'Title of array',
      description:
        'Array with items.oneOf selection. OneOf selection in arrays works a litle differently as they are often added and removed on level of the array. Here, we want a selection of the type when adding content, not a oneOf-toggle per item.',
      type: 'array',
      minItems: 2,
      items: {
        oneOfProperty: 'type',
        oneOf: [
          {
            id: 'header',
            title: 'Title of header',
            type: 'object',
            required: ['type', 'text'],
            properties: {
              type: {
                type: 'string',
                const: 'header',
                options: {
                  hidden: true
                }
              },
              text: {
                title: 'Header text',
                type: 'string'
              }
            }
          },
          {
            id: 'paragraph',
            title: 'Title of paragraph',
            type: 'object',
            required: ['type', 'text'],
            properties: {
              type: {
                type: 'string',
                const: 'paragraph',
                options: {
                  hidden: true
                }
              },
              text: {
                title: 'Paragraph text',
                type: 'string'
              }
            }
          }
        ]
      },
      additionalItems: {
        title: 'Width in px',
        type: 'number',
        default: 400
      }
    }}
  />
</Canvas>

**without breaking object oneOf support**

<Canvas>
  <JsonForm
    widgets={widgets}
    addOptionalProps={false}
    schema={{
      type: 'object',
      oneOfProperty: 'type',
      description: 'description only for object typeSelection',
      oneOf: [
        {
          type: 'object',
          title: 'first option',
          required: ['type', 'title'],
          properties: {
            type: { type: 'string', const: 'first' },
            title: { type: 'string', title: 'header 1' }
          }
        },
        {
          type: 'object',
          title: 'second option',
          required: ['type', 'title'],
          properties: {
            type: { type: 'string', const: 'second' },
            title: { type: 'string', title: 'header 2' }
          }
        }
      ]
    }}
  />
</Canvas>

## roadmap

- support for optional properties
- set `additionalProperties` to `true` by default
