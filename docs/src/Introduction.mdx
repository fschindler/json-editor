import { Meta, Canvas } from '@storybook/addon-docs';
import { widgets, JsonForm } from '@sagold/rje-aria-widgets';
import { NpmPackageName } from './NpmPackageName';
import logo from '../images/he-square-700x540.png';

<Meta title="Introduction" />

<a href="https://GitHub.com/sagold/json-editor/" style={{ position: 'absolute' }}>
  <img src="https://badgen.net/badge/icon/github?icon=github&label" />
</a>

<div
  style={{
    margin: 0,
    display: 'flex',
    justifyContent: 'center',
    borderBottom: '1px solid #333',
    overflow: 'hidden',
    padding: '0 4em'
  }}
>
  <img src={logo} style={{ marginBottom: -1, width: '100%', maxWidth: 400 }} />
</div>

<h1 style={{ textAlign: 'center' }}>json-editor documentation</h1>

> Documentation around [@sagold/react-json-editor](https://github.com/sagold/json-editor/tree/main/packages/react-json-editor), an implementation of [headless-json-editor](https://github.com/sagold/json-editor/tree/main/packages/headless-json-editor).

<NpmPackageName name="@sagold/react-json-editor" />

<div style={{ textAlign: 'center' }}>
  [Overview](#overview) | [Roadmap](#roadmap) | [Changelog](?path=/docs/changelog--docs)
</div>

## Overview

The focus of this documentation mostly lies on user interface features, its configuration options and packages. For an understanding of the general behaviour of `headless-json-editor` you can refer to the sections on root, mainly:

- [ObjectProperties](?path=/docs/objectproperties--docs)
- [ArrayItems](?path=/docs/arrayitems--docs)
- [DateFormat](?path=/docs/dateformats--docs)

The main section focusses on overall json-schema behaviour, feature support and configration options. In addition

- [**COOKBOOK**](?path=/docs/cookbook-conditionalforms--docs) lists a small set of usage examples
- **PACKAGES** lists examples and showcases widgets and their options. The main package to get started is [rje-mantine-widgets](?path=/docs/packages-rje-mantine-widgets-overview--docs)
- [**DOCS**](/?path=/story/docs-arrayitems--items-array) section mainly contains stories used in documentation pages, but is still helpful as an overview and to play with features and widget options in isolation.

For a **quick setup** of `react-json-editor` and its default widgets you need the following packages installed

```sh
yarn add @sagold/react-json-editor @sagold/rje-mantine-widgets @mantine/core @mantine/hooks @mantine/dates
```

```tsx
import { MantineProvider } from '@mantine/core';
import '@mantine/core/styles.css';
import { JsonForm } from '@sagold/rje-mantine-widgets';
import '@sagold/rje-mantine-widgets/dist/styles.css';

function App() {
  return (
    <MantineProvider>
      <JsonForm
        schema={{
          title: 'Login',
          required: ['name', 'pass'],
          properties: {
            name: { type: 'string' },
            pass: { type: 'string' }
          }
        }}
        onChange={console.log}
      />
    </MantineProvider>
  );
}
```

Working with your **own react widgets** you should start with

- @sagold/react-json-editor

Working with your another framework or non at all, you start with the following package

- headless-json-editor

> This documentation and react-implementation serves as an example and a reference for your own headless-json-editor integration and widgets. Still, the packages used here may be used directly.

## Roadmap

- [ ] deprecate react-aria in favor of mantine
  - [ ] file widget
  - [ ] chip multiselect for array#string+enum
  - [ ] navigation widget
  - [✓] date widgets
  - [✓] live update option
- [✓] update json-schema-library to v10

_drag&rop features_

- [✓] drag items across arrays
- [ ] drag html-widget into array to add items
- [ ] drag validation of wrong items while dragging

_stability_

- [✓] test weird/incorrect states (change of schema types, errors in dynamic schemas, wrong input data)
- [✓] improve update flow (using diff to patch less nodes and ensure current input does not lose focus)
- [✓] deploy docs in workflow only
- [ ] add integration test setup
  - [ ] test action menu item & visibility

_further topics_

- [ ] allow for error-message configuration in json-schema
- [ ] async validation errors and update
- [ ] i18n
- [ ] wizard option (split form to pages)
- [ ] delegation editor support (portal for widget details)
- [ ] can we have sortableJS as plugin?
- [ ] logic to support un/collapse all option
- [?] rework validation function & logic (errors and node assignments)
