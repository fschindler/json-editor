import{create}from"../../node/create";import{join}from"gson-pointer";import{getChildNodeIndex,getChildNode}from"../../node/getChildNode";import{getUpdatedData}from"./getUpdatedData";export function resolveDependencies(e,t,o,n){const d=[];if(!t.schema.dependencies)return[t,d];const r=o[0];if(!(null!=t.schema.dependencies[r]))return[t,d];const i=getChildNode(t,o[0]);if(void 0===i)throw new Error(`currently edited child '${t.pointer}/${o[0]}' could not be resolved on transform.set`);const c=getUpdatedData(t,join(o),n);d.push({type:"delete",node:t});const s=create(e,c,t.schema,t.pointer);d.push({type:"create",node:s});const p=getChildNodeIndex(s,o[0]);return s.children[p]=i,t.children=s.children,[t,d]}